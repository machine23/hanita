# Hanita

## Учебный мессенджер Hanita
Реализация в виде простого клиент-серверного взаимодействия по протоколу JIM.
* клиент отправляет запрос серверу
* сервер отвечает соответствующим кодом результата

##### ДомЗад 3
Сервер и клиент реализованы в виде модулей. 
Запуск клиента:

    python3 -m client [args]

Запуск сервера:

    python3 -m server [args]
    


##### ДомЗад 2

###### Основное задание
- [x] Реализовать логгирование с использованием модуля logging:
    - [x] Реализовать декоратор @log, фиксирующий oбращение к декорируемой функции: сохраняет​ ​имя​ ​ функции​ ​и ​её​ ​аргументы.
    - [x] Настройку​ ​логгера​ ​выполнить​ ​в отдельном​ ​модуле​ log_config.py:
        - [x] Создание именнованного логгера.
        - [x] Сообщения лога должны иметь следучщий формат: "<дата-время> <уровень_важности> <имя_модуля> <имя_функции> <сообщение>"
        - [x] Журналирование должно производиться в лог-файл.
        - [x] На стороне сервера необходимо настроить ежедневную ротацию лог-файлов.
- [x] Реализовать функции отправки/приема данных на стороне клиента. Для упрощения разработки на данном этапе пусть клиентское приложение будет либо только принимать, либо только отправлять сообщения в общий чат. Запуск скрипта клиента должен осуществляться с параметром командной строки: -r (чтение чата) или -w (передача сообщений в чат).
- [x] Реализовать обработку нескольких клиентов на сервере с использованием функции select таким образом, что клиенты общаются в "общем чате", т.е. каждое сообщение каждого клиента отправляется всем клиентам, подключенным к серверу.
- [x] Написать тесты.
###### Дополнительно
- [ ] Реализовать скрипт, запускающий два клиентских приложения - одно на чтение чата, другое на запись в чат (использовать модуль subprocess).
- [ ] Реализовать скрипт, запускающий указанное количество клиентских приложений.
- [ ] Для UNIX реализовать обработку выбора ввода данных от пользователя с клавиатуры и чтение из сокета с использованием функции select.
- [ ] В декораторе @log реализовать фиксацию функции, из которой была вызвана декорированная функция.


##### ДомЗад 1

#### Функции клиента
* сформировать  presence-сообщение
* отправить сообщение серверу
* получить ответ от сервера
* разобрать сообщение сервера
* параметры командной строки скрипта client.py \<addr\> [\<port\>]
    - addr - ip сервера
    - port - tcp-порт сервера, по умолчанию 7777

#### Функции сервера
* принимает сообщение клиента
* формирует ответ клиенту
* отправляет ответ клиенту
* параметры командной строки:
    - -p \<port\> - TCP-порт для работы (по умолчанию использует порт 7777)
    - -a \<addr\> - IP-адрес для прослушивания (по умолчанию слушает все доступные адреса)

#### Формат сообщения presence

Поля action и time - обязательны.

```json
{
    "action" : "presence",
    "time" : <unix  timestamp>,
    "type" : "status",
    "user" : {
        "account_name" : "C0deMaver1ck",
        "status" : "Yep,  I  am  here!"
    }
}
```

#### Формат ответа сервера
```json
{
    "response": 1xx / 2xx,
    "time": <unix timestamp>,
    "alert": "message (optional for 2xx codes)"
}
```
или
```json
{
    "response": 4xx / 5xx,
    "time": <unix timestamp>,
    "error": "error message (optional)"
}
```
